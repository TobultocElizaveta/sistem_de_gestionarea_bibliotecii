{% extends 'base.html' %}
{% block content %}


<div class="overflow-x-auto rounded-lg shadow w-full"> 
    <div class="container mx-auto py-8">
        <center><h1 class="text-2xl font-semibold mb-4">Lista Tranzacțiilor</h1>

         <form class="mb-4" method="post">
            <input type="text" name="search" class="px-2 py-1 border border-gray-300 rounded" placeholder="Caută după numele membrului sau ID-ul tranzacției">
            <button type="submit" class="ml-2 px-4 py-1 bg-blue-500 text-white rounded hover:bg-blue-600">Caută</button>
        </form></center>
        <table class="w-full bg-white border border-gray-200 border-collapse">
          <thead>
              <tr class="bg-gray-100">
                  <th class="py-2 px-4 text-left border border-gray-200">ID Tranzacție</th>
                  <th class="py-2 px-4 text-left border border-gray-200">Carte</th>
                  <th class="py-2 px-4 text-left border border-gray-200">Utilizator</th>
                  <th class="py-2 px-4 text-left border border-gray-200">Data Împrumutului</th>
                  <th class="py-2 px-4 text-left border border-gray-200">Data Returnării</th>
                  <th class="py-2 px-4 text-left border border-gray-200">Acțiune</th>
              </tr>
          </thead>
          <tbody>
              {% for trans,member,book in trans %}
              <tr class="{{ 'bg-gray-50' if loop.index is even else 'bg-white' }}">
                      <td class="py-2 px-4 border border-gray-200">{{ trans.id }}</td>
                      <td class="py-2 px-4 border border-gray-200"><a href="/view_book/{{book.id}}" class="text-green-500" title="Afișează mai multe detalii">{{ book.title }}</a></td>
                      <td class="py-2 px-4 border border-gray-200"><a href="/view_member/{{member.id}}" class="text-blue-500" title="Afișează mai multe detalii">{{ member.name }}</a></td>
                      <td class="py-2 px-4 border border-gray-200">{{ trans.issue_date.date() }}</td>
                      <td class="py-2 px-4 border border-gray-200">{% if trans.return_date %}{{ trans.return_date.date() }}{% else %}<p class="text-red-500">Ne-returnată</p>{% endif %}</td>
                      <td class="py-2 px-4 border border-gray-200"><a class="ml-2 px-4 py-1 bg-green-500 text-white rounded hover:bg-green-600" href="returnbook/{{trans.id}}">Gestionează</a></td>
                      </tr>
              {% endfor %}
          </tbody>
      </table>
      
    </div>
</div>

{% endblock %}